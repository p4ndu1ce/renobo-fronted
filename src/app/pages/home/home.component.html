<div class="max-w-lg mx-auto px-4 sm:px-6">
  <!-- Bot√≥n Principal: Solicitar Cr√©dito ‚Üí elegir plan (Roadmap 72h) -->
  <button
    type="button"
    (click)="goToPlanSelection()"
    class="flex items-center justify-center gap-3 w-full py-4 px-6 bg-[#fa5404] text-white font-bold rounded-[2.5rem] shadow-orange-200 hover:shadow-[0_6px_20px_0_rgba(250,84,4,0.3)] transition-shadow mb-6"
  >
    <span class="text-xl leading-none">+</span>
    <span>Solicitar Cr√©dito</span>
  </button>

  <!-- Categor√≠as: grid 3 columnas -->
  <section class="mb-8">
    <h2 class="text-base font-bold text-slate-800 mb-3">Categor√≠as</h2>
    <div class="grid grid-cols-3 gap-3">
      @for (c of categorias; track c.nombre) {
        <div class="rounded-3xl p-4 bg-white border border-orange-100/50 shadow-sm flex flex-col items-center justify-center min-h-[100px]">
          <span class="inline-flex items-center justify-center w-12 h-12 rounded-2xl bg-[#fa5404]/10 text-2xl mb-2">{{ c.icono }}</span>
          <span class="text-sm font-medium text-slate-700 text-center">{{ c.nombre }}</span>
        </div>
      }
    </div>
  </section>

  <!-- Servicios Recientes -->
  <section class="mb-8">
    <div class="flex justify-between items-center mb-4">
      <h3 class="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Servicios Recientes</h3>
      @if (recentWorks().length > 0) {
        <button routerLink="/seguimiento" class="text-[10px] font-bold text-[#fa5404] uppercase hover:underline">Ver todos</button>
      }
    </div>

    <div class="space-y-3">
      @for (work of recentWorks(); track work.id) {
        <div class="bg-white p-4 rounded-[2rem] border border-orange-100/50 shadow-sm flex justify-between items-center animate-fade-in">
          <div class="flex items-center gap-4">
            <div class="w-12 h-12 bg-orange-50 rounded-2xl flex items-center justify-center text-xl">
              {{ getIconForCategory(work.descripcion) }}
            </div>
            <div>
              <p class="font-bold text-slate-800 text-sm italic line-clamp-1">{{ work.descripcion || 'Solicitud de Obra' }}</p>
              <p class="text-[10px] text-slate-400 font-medium">{{ work.createdAt | date:'dd MMM, yyyy' }}</p>
            </div>
          </div>

          <span [class]="getStatusClass(work.estado)" class="px-3 py-1 rounded-full text-[9px] font-bold uppercase tracking-tighter">
            {{ getStatusLabel(work.estado) }}
          </span>
        </div>
      } @empty {
        <div class="bg-white/50 border-2 border-dashed border-orange-100 rounded-[2.5rem] p-8 text-center">
          <p class="text-2xl mb-2">üèóÔ∏è</p>
          <p class="text-xs font-bold text-slate-500 uppercase">A√∫n no tienes solicitudes</p>
          <p class="text-[10px] text-slate-400 mt-1">Toca el bot√≥n superior para empezar</p>
        </div>
      }
    </div>
  </section>

  <!-- Financiamiento: tarjetas horizontales (planes de cr√©dito) -->
  <section class="mb-8">
    <h2 class="text-base font-bold text-slate-800 mb-3">Financiamiento</h2>
    <div class="flex gap-3 overflow-x-auto pb-2 -mx-1 snap-x snap-mandatory scrollbar-hide">
      @for (plan of configService.catalog()?.creditPlans ?? []; track plan.id) {
        <div class="flex-shrink-0 w-[260px] snap-center rounded-3xl bg-white border border-slate-200 shadow-sm p-4">
          <p class="font-bold text-slate-800">{{ plan.name }}</p>
          <p class="text-slate-500 text-sm mt-1">Hasta {{ plan.maxAmount | currency }}</p>
          <p class="text-slate-400 text-xs mt-0.5">Desde {{ plan.minAmount | currency }}</p>
        </div>
      }
      @empty {
        <div class="flex-shrink-0 w-[260px] snap-center rounded-3xl bg-slate-50 border border-slate-200 shadow-sm p-4">
          <p class="text-slate-500 text-sm">Cargando planes‚Ä¶</p>
        </div>
      }
    </div>
  </section>
</div>
